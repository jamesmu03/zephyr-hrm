// Updated by GitHub Copilot

@startuml

[*] -> init

state init {
    init_run: Configure GPIO, ADC, and button interrupt
    init_run: Transition to IDLE
}

state idle {
    idle_run: Wait for button press
}

state adc_read {
    adc_read_run: Read ADC value
    adc_read_run: Convert ADC value to mV
    adc_read_run: Calculate LED1 blink period
    adc_read_run: Transition to BLINKING
}

state blinking {
    blinking_entry: Start blinking timers
    blinking_run: Blink LED1
    blinking_run: Stop blinking after duration
}

init -> idle : Initialization complete
idle -d-> adc_read : Button press detected
adc_read -> blinking : ADC read complete
blinking -> idle : Blinking duration complete
idle -> [*] : System shutdown

@enduml